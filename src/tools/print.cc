/*!
  \file print.cc

  \brief Print a custom std::cout end std::cerr handling verbosity

  \author Julien BERT <julien.bert@univ-brest.fr>
  \author Didier BENOIT <didier.benoit@inserm.fr>
  \author LaTIM, Brest, FRANCE
  \version 1.0
  \date Monday September 23, 2019
*/

#include "GGEMS/tools/print.hh"

// Initializations
GGEMSStream GGEMScout = GGEMSStream(std::cout);
GGEMSStream GGEMScerr = GGEMSStream(std::cerr);

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

GGEMSStream::GGEMSStream(std::ostream& stream)
: class_name_(""),
  method_name_(""),
  verbosity_limit_(1),
  verbosity_level_(0),
  stream_counter_(0),
  stream_(stream)
{
  ;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void GGEMSStream::SetVerbosity(int const& verbosity_limit)
{
  verbosity_limit_ = verbosity_limit;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

GGEMSStream& GGEMSStream::operator()(std::string const& class_name,
  std::string const& method_name, int const& verbosity_level)
{
  class_name_ = class_name;
  method_name_ = method_name;
  verbosity_level_ = verbosity_level;
  stream_counter_ = 0;
  return *this;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void set_verbose(int verbosity)
{
  GGEMScout.SetVerbosity(verbosity);
  GGEMScerr.SetVerbosity(verbosity);
}