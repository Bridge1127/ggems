/*!
  \file GGPrint.cc

  \brief Print a custom std::cout end std::cerr handling verbosity

  \author Julien BERT <julien.bert@univ-brest.fr>
  \author Didier BENOIT <didier.benoit@inserm.fr>
  \author LaTIM, Brest, FRANCE
  \version 1.0
  \date Monday September 23, 2019
*/

#include "GGEMS/tools/GGPrint.hh"

// Initializations
GGStream GGcout = GGStream(std::cout, GGConsoleColor::green);
GGStream GGcerr = GGStream(std::cerr, GGConsoleColor::red);
GGStream GGwarn = GGStream(std::cout, GGConsoleColor::yellow);

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

GGStream::GGStream(std::ostream& stream, GGConsoleColor const& color)
: class_name_(""),
  method_name_(""),
  verbosity_limit_(1),
  verbosity_level_(0),
  stream_counter_(0),
  stream_(stream),
  color_index_(color)
{
  ;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void GGStream::SetVerbosity(GGint const& verbosity_limit)
{
  verbosity_limit_ = verbosity_limit;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

GGStream& GGStream::operator()(std::string const& class_name,
  std::string const& method_name, GGint const& verbosity_level)
{
  class_name_ = class_name;
  method_name_ = method_name;
  verbosity_level_ = verbosity_level;
  stream_counter_ = 0;
  return *this;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void set_verbose(GGint verbosity)
{
  GGcout.SetVerbosity(verbosity);
  GGcerr.SetVerbosity(verbosity);
  GGwarn.SetVerbosity(verbosity);
}