/*!
  \file GGEMSPrint.cc

  \brief Print a custom std::cout end std::cerr handling verbosity

  \author Julien BERT <julien.bert@univ-brest.fr>
  \author Didier BENOIT <didier.benoit@inserm.fr>
  \author LaTIM, Brest, FRANCE
  \version 1.0
  \date Monday September 23, 2019
*/

#include "GGEMS/tools/GGEMSPrint.hh"

// Initializations
GGEMSStream GGcout = GGEMSStream(std::cout, GGEMSConsoleColor::green);
GGEMSStream GGcerr = GGEMSStream(std::cerr, GGEMSConsoleColor::red);
GGEMSStream GGwarn = GGEMSStream(std::cout, GGEMSConsoleColor::yellow);

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

GGEMSStream::GGEMSStream(std::ostream& stream, GGEMSConsoleColor const& color)
: class_name_(""),
  method_name_(""),
  verbosity_limit_(3),
  verbosity_level_(0),
  stream_counter_(0),
  stream_(stream),
  color_index_(color)
{
  ;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void GGEMSStream::SetVerbosity(GGint const& verbosity_limit)
{
  verbosity_limit_ = verbosity_limit;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

GGEMSStream& GGEMSStream::operator()(std::string const& class_name,
  std::string const& method_name, GGint const& verbosity_level)
{
  class_name_ = class_name;
  method_name_ = method_name;
  verbosity_level_ = verbosity_level;
  stream_counter_ = 0;
  return *this;
}

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////

void set_ggems_verbose(GGint verbosity)
{
  GGcout.SetVerbosity(verbosity);
  GGcerr.SetVerbosity(verbosity);
  GGwarn.SetVerbosity(verbosity);
}
